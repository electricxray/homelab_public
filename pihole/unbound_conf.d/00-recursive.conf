server:
  # Listen on all interfaces *inside the container*, on port 5053 (image default)
  interface: 0.0.0.0
  interface: ::0
  port: 5053

  # Only allow queries from the Docker private subnet
  access-control: 172.30.0.0/24 allow
  access-control: 127.0.0.0/8 allow
  access-control: ::1 allow
  access-control: ::0/0 refuse

  # Privacy/security hardening
  hide-identity: yes
  hide-version: yes
  harden-glue: yes
  harden-dnssec-stripped: yes
  harden-referral-path: yes
  qname-minimisation: yes
  use-caps-for-id: yes

  # Act as a real recursive resolver (authoritative chain via root hints)
  root-hints: "/etc/unbound/root.hints"

  # Performance sanity (Pi 5 has room, but don't get silly)
  num-threads: 2
  so-rcvbuf: 0
  so-sndbuf: 0
  msg-cache-size: 64m
  rrset-cache-size: 128m

  # Safer defaults
  do-ip4: yes
  do-ip6: yes
  prefer-ip6: no
  minimal-responses: yes
  prefetch: yes
  prefetch-key: yes
